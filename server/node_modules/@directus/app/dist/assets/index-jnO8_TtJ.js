import{T as Me,w as Se,a as Ce,v as Ue}from"./vue.runtime.esm-bundler-u7zPONa8.js";import{t as Te,u as Ne,v as xe,_ as R,w as ye,x as ce,y as we,z as Ee,M as Oe,A as de,B as Le,C as je,D as Re,E as Ae,F as Fe,S as qe,G as ze,H as Ve,I as He,J as Ge,K as Pe,L as Ze,N as Je,V as We,O as Ke}from"./index.U65MTW-P.entry.js";import{u as Qe,a as Xe,b as Ye,c as et}from"./index-5gVRDtWi.js";import{storeToRefs as ve}from"./pinia.d1g5Fl4h.entry.js";import{useI18n as se}from"./vue-i18n.j1r1luJD.entry.js";import{useRouter as Be}from"./vue-router.crnX9QKo.entry.js";import{d as A,c as w,e as k,be as $e,w as te,b0 as _,b1 as oe,bt as q,aT as a,a8 as g,br as s,I as ne,a9 as B,y as l,ab as x,aa as S,aI as L,b2 as De,u as d,ba as U,af as j,a_ as ae,aA as tt,a$ as K,aH as ot,n as nt,p as at,ad as st,as as lt,aJ as it,aW as rt,aU as ct}from"./runtime-core.esm-bundler-xepdY9Hv.js";const ut=["src"],dt=A({__name:"module-bar-logo",setup(h){const{t:e}=se(),o=Te(),v=Ne(),n=w(()=>{var m;return v.settings===null||!((m=v.settings)!=null&&m.project_logo)?null:`${xe()}assets/${v.settings.project_logo}`}),t=k(!1),{queueHasItems:c}=$e(o);te(()=>c.value,m=>{m&&(t.value=!0)});const i=w(()=>{var m;return(m=v.settings)==null?void 0:m.project_url}),p=w(()=>{var m;return(m=v.settings)!=null&&m.project_url?e("view_project"):!1});function u(){c.value===!1&&(t.value=!1)}return(m,C)=>{const M=_("v-progress-linear"),N=oe("tooltip");return q((a(),g(De(i.value?"a":"div"),{href:i.value,target:i.value?"_blank":void 0,rel:i.value?"noopener noreferrer":void 0,class:L(["module-bar-logo",{loading:t.value}])},{default:s(()=>[n.value?(a(),S(ne,{key:0},[l(Me,{name:"fade"},{default:s(()=>[t.value?(a(),g(M,{key:0,indeterminate:"",rounded:"",onAnimationiteration:u})):B("",!0)]),_:1}),x("img",{class:"custom-logo",src:n.value,alt:"Project Logo"},null,8,ut)],64)):(a(),S("div",{key:1,class:L(["logo",{running:t.value}]),onAnimationiteration:u},null,34))]),_:1},8,["href","target","rel","class"])),[[N,p.value,void 0,{right:!0}]])}}}),vt=R(dt,[["__scopeId","data-v-c5931858"]]),_t={class:"module-bar-avatar"},pt=["src","alt"],mt=A({__name:"module-bar-avatar",setup(h){const{t:e}=se(),o=ye(),v=ce(),{notificationsDrawerOpen:n}=ve(o),{unread:t}=ve(v),c=we(),i=k(!1),p=w(()=>{var N;return!c.currentUser||!("avatar"in c.currentUser)||!((N=c.currentUser)!=null&&N.avatar)?null:Ee(`${xe()}assets/${c.currentUser.avatar.id}?key=system-medium-cover`)}),u=k(null),m=w(()=>`/users/${c.currentUser.id}`),C=w(()=>"/logout"),M=c.fullName??void 0;return(N,b)=>{const W=_("v-icon"),z=_("v-button"),E=_("v-badge"),G=_("v-card-title"),Q=_("v-card-actions"),X=_("v-card"),Y=_("v-dialog"),P=_("v-avatar"),le=_("router-link"),Z=_("v-hover"),ee=oe("tooltip");return a(),S("div",_t,[l(E,{value:d(t),disabled:d(t)==0,class:"notifications-badge"},{default:s(()=>[q((a(),g(z,{tile:"",icon:"","x-large":"",class:"notifications",onClick:b[0]||(b[0]=H=>n.value=!0)},{default:s(()=>[l(W,{name:"notifications"})]),_:1})),[[ee,d(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),l(Z,null,{default:s(({hover:H})=>[l(Y,{modelValue:i.value,"onUpdate:modelValue":b[2]||(b[2]=T=>i.value=T),onEsc:b[3]||(b[3]=T=>i.value=!1)},{activator:s(({on:T})=>[l(Me,{name:"sign-out"},{default:s(()=>[H?q((a(),g(z,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:T},{default:s(()=>[l(W,{name:"logout"})]),_:2},1032,["onClick"])),[[ee,d(e)("sign_out"),void 0,{right:!0}]]):B("",!0)]),_:2},1024)]),default:s(()=>[l(X,null,{default:s(()=>[l(G,null,{default:s(()=>[j(U(d(e)("sign_out_confirm")),1)]),_:1}),l(Q,null,{default:s(()=>[l(z,{secondary:"",onClick:b[1]||(b[1]=T=>i.value=!i.value)},{default:s(()=>[j(U(d(e)("cancel")),1)]),_:1}),l(z,{to:C.value},{default:s(()=>[j(U(d(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),l(le,{to:m.value},{default:s(()=>[q((a(),g(P,{tile:"",large:"",class:L({"no-avatar":!p.value})},{default:s(()=>[p.value&&!u.value?(a(),S("img",{key:0,src:p.value,alt:d(M),class:"avatar-image",onError:b[4]||(b[4]=T=>u.value=T)},null,40,pt)):(a(),g(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[ee,d(M),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),ft=R(mt,[["__scopeId","data-v-56ca75de"]]),ht={class:"module-bar"},gt={class:"modules"},bt=A({__name:"module-bar",setup(h){const e=Ne(),{modules:o}=je(),v=w(()=>o.value.map(t=>t.id)),n=w(()=>e.settings?(e.settings.module_bar??Oe).filter(t=>t.type==="link"?!0:t.enabled&&v.value.includes(t.id)).map(t=>{if(t.type==="link"){const i=de.omit(t,["url"]);return t.url.startsWith("/")?i.to=t.url:i.href=t.url,Le(i)}const c=o.value.find(i=>i.id===t.id);return{...t,...o.value.find(i=>i.id===t.id),to:`/${c.id}`}}):[]);return(t,c)=>{const i=_("v-icon"),p=_("v-button"),u=oe("tooltip");return a(),S("div",ht,[l(vt),x("div",gt,[(a(!0),S(ne,null,ae(n.value,m=>q((a(),g(p,{key:m.id,icon:"","x-large":"",to:m.to,href:m.href,tile:""},{default:s(()=>[l(i,{name:m.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[u,m.name,void 0,{right:!0}]])),128))]),l(ft)])}}}),yt=R(bt,[["__scopeId","data-v-572954c3"]]),wt={class:"notification-dialogs"},kt={target:"_blank",href:"https://github.com/directus/directus/issues/new?template=bug_report.yml"},$t=A({__name:"notification-dialogs",setup(h){const{t:e}=se(),o=ce(),{isAdmin:v}=we(),n=w(()=>o.dialogs);function t(c){o.remove(c)}return(c,i)=>{const p=_("v-card-title"),u=_("v-error"),m=_("v-card-text"),C=_("v-button"),M=_("v-card-actions"),N=_("v-card"),b=_("v-dialog");return a(),S("div",wt,[(a(!0),S(ne,null,ae(n.value,W=>(a(),g(b,{key:W.id,"model-value":"",persist:""},{default:s(()=>[l(N,{class:L([W.type])},{default:s(()=>[l(p,null,{default:s(()=>[j(U(W.title),1)]),_:2},1024),W.text||W.error?(a(),g(m,{key:0},{default:s(()=>[j(U(W.text)+" ",1),W.error?(a(),g(u,{key:0,error:W.error},null,8,["error"])):B("",!0)]),_:2},1024)):B("",!0),l(M,null,{default:s(()=>[W.type==="error"&&d(v)&&W.code==="UNKNOWN"?(a(),g(C,{key:0,secondary:""},{default:s(()=>[x("a",kt,U(d(e)("report_error")),1)]),_:1})):B("",!0),l(C,{onClick:z=>t(W.id)},{default:s(()=>[j(U(d(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),St=R($t,[["__scopeId","data-v-69650eae"]]),Vt={key:1,class:"content"},Wt=["onClick"],Mt={key:0,class:"message"},Ct=A({__name:"notifications-drawer",setup(h){const{t:e}=se(),o=ye(),v=we(),n=Re(),{setUnreadCount:t}=ce(),c=Be(),i=k([]),p=k(["inbox"]),u=k([]),m=k(1),C=k(25),M=k(null),N=k({}),b=k(null);te(p,($,V)=>{$[0]!==V[0]&&(m.value=1,i.value=[])}),te([M,N],()=>{m.value=1});function W($){i.value.includes($)?i.value.splice(i.value.indexOf($),1):i.value.push($)}function z($){u.value.includes($)?u.value.splice(u.value.indexOf($),1):u.value.push($)}const{notificationsDrawerOpen:E}=ve(o),G=w(()=>({_and:[{recipient:{_eq:v.currentUser.id}},{status:{_eq:p.value[0]}},N.value]})),{items:Q,loading:X,getItems:Y,totalPages:P,getItemCount:le}=Qe(k("directus_notifications"),{filter:G,fields:k(["id","subject","message","collection","item","timestamp"]),sort:k(["-timestamp"]),search:M,limit:C,page:m}),Z=w(()=>Q.value.map($=>{var O;let V;if($.collection){const D=n.getCollection($.collection);(O=D==null?void 0:D.meta)!=null&&O.singleton||!$.item?V=Ae($.collection):V=Fe($.collection,$.item)}else String($.item).startsWith("/")&&(V=String($.item));return{...$,to:V}}));async function ee(){await Ve.patch("/notifications",{query:{recipient:{_eq:v.currentUser.id}},data:{status:"archived"}}),await le(),await Y(),t(0)}async function H(){await Ve.patch("/notifications",{keys:i.value,data:{status:p.value[0]==="inbox"?"archived":"inbox"}}),await le(),await Y(),i.value=[]}function T($){c.push($),E.value=!1}return($,V)=>{const O=_("v-icon"),D=_("v-button"),ue=_("v-list-item-icon"),_e=_("v-list-item-content"),pe=_("v-tab"),me=_("v-tabs"),fe=_("v-info"),he=_("v-skeleton-loader"),r=_("v-list"),f=_("v-checkbox"),F=_("v-text-overflow"),ie=_("v-list-item"),ge=_("v-pagination"),I=_("v-drawer"),re=oe("tooltip"),ke=oe("md");return a(),g(I,{modelValue:d(E),"onUpdate:modelValue":V[5]||(V[5]=y=>tt(E)?E.value=y:null),icon:"notifications",title:d(e)("notifications"),"sidebar-label":d(e)("folders"),onCancel:V[6]||(V[6]=y=>E.value=!1)},{actions:s(()=>[l(qe,{modelValue:M.value,"onUpdate:modelValue":V[0]||(V[0]=y=>M.value=y),filter:N.value,"onUpdate:filter":V[1]||(V[1]=y=>N.value=y),collection:"directus_notifications"},null,8,["modelValue","filter"]),q((a(),g(D,{icon:"",rounded:"",disabled:i.value.length===0,secondary:"",onClick:H},{default:s(()=>[l(O,{name:p.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[re,p.value[0]==="inbox"?d(e)("archive"):d(e)("unarchive"),void 0,{bottom:!0}]]),p.value[0]==="inbox"?q((a(),g(D,{key:0,icon:"",rounded:"",disabled:Z.value.length===0,onClick:ee},{default:s(()=>[l(O,{name:"done_all"})]),_:1},8,["disabled"])),[[re,d(e)("archive_all"),void 0,{bottom:!0}]]):B("",!0)]),sidebar:s(()=>[l(me,{modelValue:p.value,"onUpdate:modelValue":V[2]||(V[2]=y=>p.value=y),vertical:""},{default:s(()=>[l(pe,{value:"inbox"},{default:s(()=>[l(ue,null,{default:s(()=>[l(O,{name:"inbox"})]),_:1}),l(_e,null,{default:s(()=>[j(U(d(e)("inbox")),1)]),_:1})]),_:1}),l(pe,{value:"archived"},{default:s(()=>[l(ue,null,{default:s(()=>[l(O,{name:"archive"})]),_:1}),l(_e,null,{default:s(()=>[j(U(d(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:s(()=>[!d(X)&&Z.value.length===0?(a(),g(fe,{key:0,icon:"notifications",title:d(e)("no_notifications"),center:""},{default:s(()=>[j(U(d(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(a(),S("div",Vt,[d(X)?(a(),g(r,{key:0,class:"notifications"},{default:s(()=>[(a(),S(ne,null,ae(10,y=>l(he,{key:y,class:L({dense:d(P)>1})},null,8,["class"])),64))]),_:1})):(a(),g(r,{key:1,class:"notifications"},{default:s(()=>[(a(!0),S(ne,null,ae(Z.value,y=>(a(),g(ie,{key:y.id,block:"",dense:d(P)>1,clickable:!!y.message,onMousedown:V[3]||(V[3]=Se(({target:J})=>b.value=J,["left","self"])),onMouseup:Se(({target:J})=>{J===b.value&&z(y.id),b.value=null},["left","self"])},{default:s(()=>[x("div",{class:"header",onClick:J=>z(y.id)},[l(f,{"model-value":i.value.includes(y.id),"onUpdate:modelValue":J=>W(y.id)},null,8,["model-value","onUpdate:modelValue"]),l(F,{class:"title",highlight:M.value,text:y.subject},null,8,["highlight","text"]),l(ze,{value:y.timestamp,type:"timestamp",relative:""},{default:s(({datetime:J})=>[l(F,{class:"datetime",text:J},null,8,["text"])]),_:2},1032,["value"]),y.to?q((a(),g(O,{key:0,clickable:"",name:"open_in_new",onClick:J=>T(y.to)},null,8,["onClick"])),[[re,d(e)("goto_collection_content")]]):B("",!0),y.message?(a(),g(O,{key:1,clickable:"",name:u.value.includes(y.id)?"expand_less":"expand_more"},null,8,["name"])):B("",!0)],8,Wt),u.value.includes(y.id)&&y.message?q((a(),S("div",Mt,null,512)),[[ke,y.message]]):B("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),d(P)>1?(a(),g(ge,{key:2,modelValue:m.value,"onUpdate:modelValue":V[4]||(V[4]=y=>m.value=y),"total-visible":5,length:d(P)},null,8,["modelValue","length"])):B("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),Nt=R(Ct,[["__scopeId","data-v-81248a9d"]]),xt={key:0,class:"icon"},Bt={class:"content"},Dt={class:"title selectable"},It={key:0,class:"text selectable"},Ut=A({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{}},setup(h){const e=h,o=ce();function v(){e.showClose===!0&&o.remove(e.id)}return(n,t)=>{const c=_("v-progress-circular"),i=_("v-icon");return a(),S("div",{class:L(["notification-item",[n.type,{tail:n.tail,dense:n.dense}]]),onClick:v},[n.loading||n.progress||n.icon?(a(),S("div",xt,[n.loading?(a(),g(c,{key:0,indeterminate:"",small:""})):n.progress?(a(),g(c,{key:1,small:"",value:n.progress},null,8,["value"])):(a(),g(i,{key:2,name:n.icon},null,8,["name"]))])):B("",!0),x("div",Bt,[x("p",Dt,U(n.title),1),n.text?(a(),S("p",It,U(n.text),1)):B("",!0)]),n.showClose?(a(),g(i,{key:1,name:"close",clickable:"",class:"close",onClick:v})):B("",!0)],2)}}}),Ie=R(Ut,[["__scopeId","data-v-7d21b14f"]]),Tt=A({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(h){const e=ce(),o=$e(e).queue;return(v,n)=>(a(),g(Ce,{class:L(["notifications-group",{"sidebar-open":v.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:s(()=>[K(v.$slots,"default",{},void 0,!0),(a(!0),S(ne,null,ae(d(o),(t,c)=>(a(),g(Ie,{id:t.id,key:t.id,title:t.title,icon:t.icon,type:t.type,loading:t.loading,progress:t.progress,tail:c===d(o).length-1,dense:v.sidebarOpen===!1,"show-close":t.persist===!0&&t.closeable!==!1},null,8,["id","title","icon","type","loading","progress","tail","dense","show-close"]))),128))]),_:3},8,["class"]))}}),Et=R(Tt,[["__scopeId","data-v-00758c2d"]]),Ot={class:"icon"},Lt={key:0,class:"title"},jt=A({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(h){const e=ye(),{sidebarOpen:o}=$e(e);return(v,n)=>{const t=_("v-icon");return a(),g(De(v.to?"router-link":"button"),{class:L(["sidebar-button",{active:v.active}]),onClick:n[0]||(n[0]=c=>v.$emit("click",c))},{default:s(()=>[x("div",Ot,[l(t,{name:v.icon},null,8,["name"])]),d(o)?(a(),S("div",Lt,[K(v.$slots,"default",{},void 0,!0)])):B("",!0)]),_:3},8,["class"])}}}),Rt=R(jt,[["__scopeId","data-v-3acfa986"]]),At={class:"notifications-preview"},Ft={key:0,class:"inline"},qt={class:"padding-box"},zt=A({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(h){const{t:e}=se(),o=ce(),{lastFour:v}=ve(o);return(n,t)=>{const c=_("router-link"),i=_("transition-expand"),p=oe("tooltip");return a(),S("div",At,[l(i,{tag:"div"},{default:s(()=>[n.modelValue?(a(),S("div",Ft,[x("div",qt,[l(c,{class:L(["link",{"has-items":d(v).length>0}]),to:"/activity"},{default:s(()=>[j(U(d(e)("show_all_activity")),1)]),_:1},8,["class"]),l(Ce,{tag:"div",name:"notification",class:"transition"},{default:s(()=>[(a(!0),S(ne,null,ae(d(v),u=>(a(),g(Ie,ot({key:u.id},u),null,16))),128))]),_:1})])])):B("",!0)]),_:1}),q((a(),g(Rt,{active:n.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=u=>n.$emit("update:modelValue",!n.modelValue))},{default:s(()=>[j(U(d(e)("activity_log")),1)]),_:1},8,["active"])),[[p,!n.sidebarOpen&&d(e)("activity_log"),void 0,{left:!0}]])])}}}),Ht=R(zt,[["__scopeId","data-v-63e60302"]]);function Gt(h){if(typeof h!="number")throw new TypeError("Expected a number");const e=h>0?Math.floor:Math.ceil;return{days:e(h/864e5),hours:e(h/36e5)%24,minutes:e(h/6e4)%60,seconds:e(h/1e3)%60,milliseconds:e(h)%1e3,microseconds:e(h*1e3)%1e3,nanoseconds:e(h*1e6)%1e3}}const Pt=(h,e)=>e===1?h:`${h}s`,Zt=1e-7;function be(h,e={}){if(!Number.isFinite(h))throw new TypeError("Expected a finite number");e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);const o=[],v=(c,i)=>{const p=Math.floor(c*10**i+Zt);return(Math.round(p)/10**i).toFixed(i)},n=(c,i,p,u)=>{if((o.length===0||!e.colonNotation)&&c===0&&!(e.colonNotation&&p==="m"))return;u=(u||c||"0").toString();let m,C;if(e.colonNotation){m=o.length>0?":":"",C="";const M=u.includes(".")?u.split(".")[0].length:u.length,N=o.length>0?2:1;u="0".repeat(Math.max(0,N-M))+u}else m="",C=e.verbose?" "+Pt(i,c):p;o.push(m+u+C)},t=Gt(h);if(n(Math.trunc(t.days/365),"year","y"),n(t.days%365,"day","d"),n(t.hours,"hour","h"),n(t.minutes,"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&h<1e3)if(n(t.seconds,"second","s"),e.formatSubMilliseconds)n(t.milliseconds,"millisecond","ms"),n(t.microseconds,"microsecond","Âµs"),n(t.nanoseconds,"nanosecond","ns");else{const c=t.milliseconds+t.microseconds/1e3+t.nanoseconds/1e6,i=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,p=c>=1?Math.round(c):Math.ceil(c),u=i?c.toFixed(i):p;n(Number.parseFloat(u),"millisecond","ms",u)}else{const c=h/1e3%60,i=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,p=v(c,i),u=e.keepDecimalsOnWholeSeconds?p:p.replace(/\.0+$/,"");n(Number.parseFloat(u),"second","s",u)}if(o.length===0)return"0"+(e.verbose?" milliseconds":"ms");if(e.compact)return o[0];if(typeof e.unitCount=="number"){const c=e.colonNotation?"":" ";return o.slice(0,Math.max(e.unitCount,1)).join(c)}return e.colonNotation?o.join(""):o.join(" ")}const Jt={class:"latency-indicator"},Kt=A({__name:"latency-indicator",setup(h){const{t:e}=se(),o=He(),v=w(()=>{const p=de.sortBy(o.latency,["timestamp"]);return p[p.length-1]}),n=w(()=>{if(!o.latency||o.latency.length===0)return 0;const p=de.sortBy(o.latency,["timestamp"]),u=p.slice(Math.max(p.length-5,0));let m=0;for(const{latency:C}of u)m+=C;return Math.round(m/u.length)}),t=w(()=>n.value<=250?4:n.value>250&&n.value<=500?3:n.value>500&&n.value<=750?2:1),c=w(()=>{switch(t.value){case 4:return`${e("connection_excellent")}
(${be(n.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${be(n.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${be(n.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${be(n.value)} ${e("latency")})`;default:return null}}),i=w(()=>{switch(t.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(p,u)=>{const m=_("v-progress-circular"),C=_("v-icon"),M=oe("tooltip");return q((a(),S("div",Jt,[v.value?(a(),g(C,{key:1,name:i.value},null,8,["name"])):(a(),g(m,{key:0,indeterminate:""}))])),[[M,c.value,void 0,{bottom:!0,end:!0}]])}}}),Qt=R(Kt,[["__scopeId","data-v-93933dfa"]]),Xt={class:"project-info"},Yt={class:"name-container"},eo=A({__name:"project-info",setup(h){const e=Ge(),o=w(()=>{var n,t;return(t=(n=e.info)==null?void 0:n.project)==null?void 0:t.project_name}),v=w(()=>{var n,t;return(t=(n=e.info)==null?void 0:n.project)==null?void 0:t.project_descriptor});return(n,t)=>{const c=_("v-text-overflow");return a(),S("div",Xt,[l(Qt),x("div",Yt,[l(c,{placement:"right",class:"name",text:o.value},null,8,["text"]),v.value?(a(),g(c,{key:0,placement:"right",class:"descriptor",text:v.value},null,8,["text"])):B("",!0)])])}}}),to=R(eo,[["__scopeId","data-v-142557c9"]]),oo=A({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(h){const e=h,o=k([]),v=k(!1);return te(()=>e.sidebarOpen,async n=>{n===!1?o.value=[]:(v.value=!0,await nt(),v.value=!1)}),(n,t)=>{const c=_("v-item-group");return a(),g(c,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=i=>o.value=i),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:v.value},{default:s(()=>[K(n.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),no=R(oo,[["__scopeId","data-v-d961026b"]]),ao=h=>(rt("data-v-e89b79df"),h=h(),ct(),h),so={class:"module-nav alt-colors"},lo={class:"module-nav-content"},io={class:"content-wrapper"},ro={class:"flex-container"},co=ao(()=>x("div",{class:"spacer"},null,-1)),uo=A({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(h,{emit:e}){var fe,he;const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},v=h,n=e,{t}=se(),c=Be(),i=w(()=>v.title??null),p=Xe(v,"splitView",n),u=k(),m=k(),C=k();let M;const N=()=>{var r;clearTimeout(M),(r=u.value)==null||r.classList.remove("hide-overflow-x")};te(p,()=>{if(!u.value||!m.value)return;u.value.classList.add("hide-overflow-x","hide-overflow-y"),M=setTimeout(N,1500);let r,f;const F=()=>{var ie;clearTimeout(r),f==null||f(),(ie=u.value)==null||ie.classList.remove("hide-overflow-y")};r=setTimeout(F,1500),f=Pe(m.value,"transitionend",F)});const{width:b}=Ze(),{width:W}=Ye(C),z=w(()=>{if(!p.value)return!0;let r;return b.value>=1260?r=b.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-W.value:b.value>=960?r=b.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:r=b.value-o.minContentWidth,r>=v.splitViewMinWidth}),{data:E}=Je("module-width",{}),G=k(me((fe=E.value)==null?void 0:fe.nav,o.minModuleNavWidth));te(G,de.debounce(r=>{E.value={...E.value??{},nav:r}},300));const Q=k(me((he=E.value)==null?void 0:he.main,o.minContentWidth));te(Q,de.debounce(r=>{E.value={...E.value??{},main:r}},300));const X=k(!1),Y=w(()=>{const r=p.value?v.splitViewMinWidth:0,f=z.value?o.minContentWidth+r:o.minContentWidth;let F;return b.value>=1260?F=b.value-o.moduleBarWidth-f-W.value:b.value>=960?F=b.value-o.moduleBarWidth-f-o.collapsedSidebarWidth:F=b.value-o.moduleBarWidth+o.overlaySpace,Math.max(F,o.minModuleNavWidth)}),P=w(()=>{const r=p.value?v.splitViewMinWidth:0;let f;return b.value>=1260?f=b.value-o.moduleBarWidth-G.value-r-W.value:b.value>=960?f=b.value-o.moduleBarWidth-G.value-r-o.collapsedSidebarWidth:f=b.value-r,Math.max(f,o.minContentWidth)}),le=w(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:Y.value,direction:"right"}]})),Z=k(!1),ee=w(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:P.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:X.value})),H=k(!1),T=we(),$=ye(),V=w(()=>{var r,f;return T.currentUser?((f=(r=T.currentUser)==null?void 0:r.role)==null?void 0:f.app_access)||!1:!0}),O=k(!1),{sidebarOpen:D,fullScreen:ue}=ve($),_e=w(()=>T.currentUser&&"appearance"in T.currentUser?T.currentUser.appearance:"auto");at("main-element",u),c.afterEach(()=>{var r;(r=u.value)==null||r.scrollTo({top:0}),ue.value=!1}),et({title:i});function pe(r){r.target&&r.target.classList.contains("close")===!1&&(D.value=!0)}function me(r,f){return r&&!Number.isNaN(r)?Number(r):f}return(r,f)=>{const F=_("v-button"),ie=_("v-info"),ge=_("v-overlay");return V.value===!1?(a(),g(ie,{key:0,center:"",title:d(t)("no_app_access"),type:"danger",icon:"block"},{append:s(()=>[l(F,{to:"/logout"},{default:s(()=>[j(U(d(t)("switch_user")),1)]),_:1})]),default:s(()=>[j(U(d(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(a(),S("div",{key:1,class:L(["private-view",{appearance:_e.value,"full-screen":d(ue),splitView:r.splitView}])},[x("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:L({"is-open":H.value,"has-shadow":r.sidebarShadow})},[l(yt),l(We,{width:G.value,"onUpdate:width":f[0]||(f[0]=I=>G.value=I),"min-width":o.minModuleNavWidth,"max-width":Y.value,options:le.value,onDragging:f[1]||(f[1]=I=>X.value=I),onTransitionEnd:N},{default:s(()=>[x("div",so,[l(to),x("div",lo,[K(r.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),x("div",{id:"main-content",ref_key:"contentEl",ref:u,class:"content"},[l(Ke,{ref_key:"headerBarEl",ref:m,small:r.smallHeader||r.splitView,shadow:r.headerShadow||r.splitView,"show-sidebar-toggle":"",title:r.title,"onToggle:sidebar":f[2]||(f[2]=I=>D.value=!d(D)),onPrimary:f[3]||(f[3]=I=>H.value=!H.value)},st({_:2},[ae(r.$slots,(I,re)=>({name:re,fn:s(ke=>[K(r.$slots,re,it(lt(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),x("div",io,[l(We,{width:Q.value,"onUpdate:width":f[4]||(f[4]=I=>Q.value=I),"min-width":o.minContentWidth,"max-width":P.value,disabled:!d(p),options:ee.value,onDragging:f[5]||(f[5]=I=>Z.value=I)},{default:s(()=>[q(x("main",null,[K(r.$slots,"default",{},void 0,!0)],512),[[Ue,z.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),r.splitView?(a(),S("div",{key:0,id:"split-content",class:L({"is-dragging":Z.value})},[K(r.$slots,"splitView",{},void 0,!0)],2)):B("",!0)])],512),x("aside",{id:"sidebar",ref_key:"sidebarEl",ref:C,role:"contentinfo",class:L(["alt-colors",{"is-open":d(D),"has-shadow":r.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:pe},[x("div",ro,[l(no,{"sidebar-open":d(D)},{default:s(()=>[K(r.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),co,l(Ht,{modelValue:O.value,"onUpdate:modelValue":f[6]||(f[6]=I=>O.value=I),"sidebar-open":d(D)},null,8,["modelValue","sidebar-open"])])],2),l(ge,{class:"nav-overlay",active:H.value,onClick:f[7]||(f[7]=I=>H.value=!1)},null,8,["active"]),l(ge,{class:"sidebar-overlay",active:d(D),onClick:f[8]||(f[8]=I=>D.value=!1)},null,8,["active"]),l(Nt),O.value===!1?(a(),g(Et,{key:0,"sidebar-open":d(D)},null,8,["sidebar-open"])):B("",!0),l(St)],2))}}}),bo=R(uo,[["__scopeId","data-v-e89b79df"]]);export{bo as PrivateView,bo as default};
